<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>VICK DATAFLOW - Final</title>

<!-- Dependencias -->
https://cdn.jsdelivr.net/npm/chart.js</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaftps://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js</script>
https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js</script>
https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js</script>

<style>
:root{--vick-blue:#004c97;--vick-light:#1a73e8;--vick-green:#009e60;--bg:#f3f8fc;--card:#fff;--text:#12202b;--muted:#667085}
:root.dark{--vick-blue:#05223a;--vick-light:#0b2b4a;--vick-green:#13b76a;--bg:#0f1720;--card:#0b1220;--text:#e6eef6;--muted:#9fb0c6}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);line-height:1.35}
.sidebar{width:270px;background:var(--vick-blue);color:#fff;height:100vh;position:fixed;padding-top:18px;box-shadow:0 6px 18px rgba(0,0,0,.12);overflow:auto}
.sidebar h2{text-align:center;margin:0 0 12px;font-size:20px;padding-bottom:6px}.sidebar a{display:block;padding:12px 18px;color:white;text-decoration:none;font-weight:700;border-bottom:1px solid rgba(255,255,255,.06)}.sidebar a:hover{background:var(--vick-light)}
.content{margin-left:290px;padding:22px;max-width:1200px}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;gap:10px}.header .actions{display:flex;gap:8px;align-items:center}
.btn{background:var(--vick-light);color:#fff;padding:10px 12px;border-radius:8px;border:none;font-weight:700;cursor:pointer}.btn.secondary{background:transparent;border:2px solid var(--vick-blue);color:var(--vick-blue)}
.card{background:var(--card);border-radius:12px;padding:18px;margin-bottom:18px;box-shadow:0 10px 30px rgba(12,35,70,.06)}.chart-container{height:320px}.row{display:grid;grid-template-columns:1fr 380px;gap:18px;margin-bottom:18px}
#map{height:380px;border-radius:12px}
#avatar-btn{position:fixed;right:24px;bottom:24px;width:86px;height:86px;border-radius:50%;background:var(--vick-green);display:flex;align-items:center;justify-content:center;box-shadow:0 12px 30px rgba(0,0,0,.18);cursor:pointer;z-index:1400}
#avatar-btn img{width:78px;height:78px;border-radius:50%;object-fit:cover;display:block}
#chat-panel{position:fixed;right:24px;bottom:120px;width:360px;height:520px;background:var(--card);border-radius:12px;box-shadow:0 20px 60px rgba(2,22,50,.2);display:none;flex-direction:column;z-index:1400}
.chat-header{background:var(--vick-blue);color:#fff;padding:12px;border-radius:12px 12px 0 0;font-weight:700}.chat-body{flex:1;overflow:auto;padding:12px}.chat-input{display:flex;padding:12px;border-top:1px solid rgba(0,0,0,.06)}.chat-input input{flex:1;padding:10px;border-radius:8px;border:1px solid #ddd}.chat-input button{margin-left:8px;padding:10px 12px;border-radius:8px;border:none;background:var(--vick-green);color:#fff;font-weight:700}
.msg-bot{background:#eefaf1;margin-bottom:10px;padding:8px;border-radius:8px}
.msg-user{background:#e8f1ff;margin-bottom:10px;padding:8px;border-radius:8px;text-align:right}
.notification{position:fixed;top:20px;right:20px;background:var(--vick-light);color:#fff;padding:12px 16px;border-radius:8px;display:none;z-index:1500}
@media(max-width:1000px){.sidebar{display:none}.content{margin:12px}.row{grid-template-columns:1fr}}
</style>
</head>
<body>

<div class="sidebar">
  <h2>VICK DATAFLOW</h2>
  <a href="#Dashboard</a>
  #inventariosInventarios</a>
  <a href="#sTendencias</a>
  #recomendacionesRecomendaciones</a>
  #mapaMapa Interactivo</a>
  #historicoHist√≥rico Mensual</a>
</div>

<div class="content">
  <div class="header">
    <div>
      <h1 style="margin:0;font-size:22px">VICK DATAFLOW - Procter & Gamble</h1>
      <div class="small" style="margin-top:6px">An√°lisis de demanda e inventarios | Vick Vaporub</div>
    </div>
    <div class="actions">
      <button class="btn" id="exportPdfBtn">‚¨á Exportar PDF</button>
      <button class="btn secondary" id="darkModeBtn">üåô Modo Oscuro</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="card">
    <h3>Demanda y Proyecci√≥n IA</h3>
    <div class="demanda-buttons">
      <button class="btn" onclick="setDemandaMode('real')">üìä Demanda real</button>
      <button class="btn" onclick="setDemandaMode('ia')">ü§ñ Proyecci√≥n IA</button>
      <button class="btn" onclick="setDemandaMode('tendencias')">ü¶† Tendencias</button>
      <button class="btn" onclick="setDemandaMode('clima')">‚ùÑÔ∏è Clima fr√≠o</button>
      <button class="btn secondary" onclick="setDemandaMode('mixta')">üîÆ Demanda compuesta</button>
      <button class="btn secondary" onclick="setDemandaMode('ambas')">üîÅ Ver ambas</button>
    </div>
    <div class="chart-container"><canvas id="demandaChart"></canvas></div>
    <div style="margin-top:12px" id="prediccionWrapper" class="card">
      <h4 style="margin:0 0 8px">Proyecci√≥n IA (6 d√≠as)</h4>
      <div class="chart-container"><canvas id="prediccionChart"></canvas></div>
    </div>
  </div>

  <!-- Inventarios y Tendencias -->
  <div class="row">
    <div class="card">
      <h3 id="inventarios">Inventarios por ciudad</h3>
      <div class="inventario-controls">
        <button class="btn" onclick="setInventarioMode('porcentaje')">üì¶ Inventario %</button>
        <button class="btn" onclick="setInventarioMode('unidades')">üì¶ Unidades</button>
        <button class="btn" onclick="setInventarioMode('riesgo')">‚ö†Ô∏è Nivel riesgo</button>
        <button class="btn secondary" onclick="filtrarCiudad('Bogot√°')">üèô Bogot√°</button>
        <button class="btn secondary" onclick="filtrarCiudad('Medell√≠n')">üèô Medell√≠n</button>
        <button class="btn secondary" onclick="filtrarCiudad('Cali')">üèô Cali</button>
        <button class="btn" onclick="resetInventarios()">üîÅ Ver todo</button>
      </div>
      <div class="chart-container"><canvas id="inventarioChart"></canvas></div>
    </div>

    <div class="card">
      <h3>Tendencias</h3>
      <div class="small" style="margin-bottom:8px">Selecciona ciudad para ver detalles</div>
      <div style="display:flex;gap:8px;margin-bottom:10px">
        <button class="btn" onclick="cambiarCiudad('Bogot√°')">Bogot√°</button>
        <button class="btn" onclick="cambiarCiudad('Medell√≠n')">Medell√≠n</button>
        <button class="btn" onclick="cambiarCiudad('Cali')">Cali</button>
      </div>
      <div class="chart-container"><canvas id="tendenciasChart"></canvas></div>
    </div>
  </div>

  <!-- Mapa -->
  <div id="mapa" class="card">
    <h3>Mapa interactivo de inventarios</h3>
    <div id="map"></div>
  </div>

  <!-- Hist√≥rico -->
  <div id="historico" class="card">
    <h3>Hist√≥rico mensual</h3>
    <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px">
      <label for="monthSelect">Seleccione mes:</label>
      <select id="monthSelect" style="padding:8px;border-radius:6px;border:1px solid #ddd">
        <option value="0">Enero</option>
        <option value="1">Febrero</option>
        <option value="2">Marzo</option>
        <option value="3" selected>Abril</option>
        <option value="4">Mayo</option>
        <option value="5">Junio</option>
        <option value="6">Julio</option>
        <option value="7">Agosto</option>
        <option value="8">Septiembre</option>
        <option value="9">Octubre</option>
        <option value="10">Noviembre</option>
        <option value="11">Diciembre</option>
      </select>
    </div>
    <div class="chart-container"><canvas id="historicoChart"></canvas></div>
  </div>
</div>

<!-- Avatar y Chat -->
<div id="avatar-btn" title="Asistente Mam√° Vicky">
  <img src="Vicky.png" alt="Mam√° Vicky" stylediv class="chat-header">Mam√° Vicky - Asistente Vick</div>
  <div id="chat-body" class="chat-body">
    <div class="msg-bot">Hola üëã Soy <b>Mam√° Vicky</b>, tu asistente Vick. Puedo ayudar con inventarios, tendencias y recomendaciones.</div>
  </div>
  <div class="chat-input">
    <input id="chatInput" placeholder="Escribe tu pregunta..." onkeydown="if(event.key==='Enter') sendChat()" />
    <button onclick="sendChat()">Enviar</button>
  </div>
</div>

<div id="notification" class="notification"></div>

<script>
/* Aqu√≠ va TODO el c√≥digo JS que me enviaste (gr√°ficas, mapa, chatbot, exportaci√≥n, modo oscuro) */
</script>

</body>
</html>
